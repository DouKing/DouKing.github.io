---
layout: post
title: 常用 git 命令总结
description: 常用 git 命令总结
categories: 学习总结
keywords: git
---

## 常用命令

#### git status

>检查当前文件状态

#### git add [file]...

>将文件添加到缓冲区（暂存）

#### git reset HEAD [file]...

>将文件移出缓冲区（取消暂存）

#### git checkout -- [file]...

>取消对文件的修改

#### git diff

>查看未暂存的文件修改的内容

#### git diff --cached

>查看已暂存的文件修改的内容

#### git commit -m '提交信息'

>提交缓冲区的文件

#### git branch [branchName]

>创建分支

#### git checkout [branchName]

>切换分支

#### git fetch upstream

>从远端仓库拉取数据到本地

#### git rebase upstream/master

>将`upstream/master`的修改衍合到当前分支

#### git push origin master

>推送到远端仓库

- origin: 远端仓库名
- master：待推送分支名

#### git commit --amend

>修改最后一次提交

#### git rebase -i HEAD~3

>修改当前版本的倒数3次历史

## 常用步骤：

- 将要提交的文件添加到缓冲区
- 将缓冲区的文件提交，并填写提交信息
- 从主仓库拉取数据，并衍合到当前分支
- 将当前分支推送到自己的远端仓库
- 发PR请求合并到主仓库

## 注意事项：

- 推送到远端仓库前，务必确保已经与主仓库数据同步
- 如与主仓库有冲突，请务必在本地解决成功后再推送到远端仓库
- commit信息一定要清晰明了，保证在后期可以准确定位代码
- 不要将不相关的修改放在一个commit里提交

## stash 命令

#### git stash [save message] [-k|--no-keep-index] [--patch]

> 暂存工作进度
>
> `-k` 和 `--no-keep-index` 指定保存进度后，是否重置暂存区
>
> `--patch` 会显示工作区和 HEAD 的差异,通过编辑差异文件，排除不需要保存的内容。和 `git add -p` 命令类似

```

$ git stash save '这是保存的进度'

```

#### git stash list

> 列显进度列表

```

$ git stash list
stash@{0}: On master: 这是保存的进度

```

#### git stash pop [--index] [stash]

> 恢复工作进度，会删除已恢复的进度
>
> `--index` 参数：不仅恢复工作区，还恢复暂存区
>
> `<stash>` 指定恢复某一个具体进度。如果没有这个参数，默认恢复最新进度

```

$ git stash pop --index stash@{0}

```

#### git stash apply [--index] [stash]

> 恢复工作进度，同 `git stash pop`，不删除已恢复的工作进度

#### git stash drop [stash]

> 删除某一个进度，默认删除最新进度

#### git stash clear

> 删除所有进度

#### git stash branch [branchname] [stash]

> 基于进度创建分支

## 其他常用命令总结

- 删除本地分支

> git branch -d [branchName]

- 删除本地tag

> git tag -d [branchName]

- 删除远程分支

> git push origin --delete [branchName]
>
> git push origin :[branchName]

- 删除远程tag

> git push origin --delete tag [tagName]
>
> git push origin :refs/tags/[tagName]

- 清除远端无效分支

> git remote prune origin [--dry-run]

- 撤销 commit

> git reset --soft HEAD^
> git reset --mixed HEAD~1
> git reset --hard HEAD~2

- git reflog

